<?xml version="1.0" encoding="utf-8"?>
<odoo>
    
    <!-- View mail.activity.schedule form -->
    <record id="view_mail_activity_schedule_form" model="ir.ui.view">
        <field name="name">view.mail.activity.schedule.form</field>
        <field name="model">mail.activity.schedule</field>
        <field name="inherit_id" ref="mail.mail_activity_schedule_view_form"/>
        <field name="arch" type="xml">

            <!-- Herencia de la vista -->
            <xpath expr="//field[@name='plan_available_ids']" position="after">
                <field name="type_lead" invisible="1" />
            </xpath>

            <!-- Actualizar esto -->
            <xpath expr="//field[@name='summary']" position="attributes">
                <attribute name="invisible">type_lead in ['privadas']</attribute>
            </xpath>

            <xpath expr="//field[@name='summary']" position="after">
                <field name="summary" string="Asunto" placeholder="¡Bienvenido a MiEmpresa!" invisible="type_lead not in ['privadas']" />
            </xpath>

            <!-- Modificadores para ocultar o mostrar según type_lead -->
            <xpath expr="//field[@name='note']" position="after">
                <group invisible="type_lead not in ['privadas']">
                    <field name="template_id" string="Cargar plantilla" class="w-50"/>
                    <field name="start_date" string="Fecha de inicio" />
                    <field name="date_deadline" string="Fecha de fin" />
                </group>
                <group invisible="type_lead not in ['privadas']">
                    <field name="attachment_ids" string="Archivos adjuntos" widget="many2many_binary" />
                </group>
            </xpath>

            <xpath expr="//field[@name='activity_user_id']" position="attributes">
                <attribute name="invisible">type_lead in ['privadas']</attribute>
            </xpath>

            <xpath expr="//field[@name='activity_user_id']" position="after">
                <field name="activity_user_ids"
                       widget="many2many_tags_email"
                       placeholder="Agregue contactos por notificar..."
                       options="{'no_quick_create': True}"
                       context="{'show_email':True}"
                       invisible="type_lead not in ['privadas']" />
            </xpath>

            <xpath expr="//field[@name='date_deadline']" position="attributes">
                <attribute name="invisible">type_lead in ['privadas']</attribute>
            </xpath>

        </field>
    </record>

</odoo>