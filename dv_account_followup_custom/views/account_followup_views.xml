<odoo>
    <data>

        <record id="customer_report_form_view" model="ir.ui.view">
            <field name="name">customer.report.followup</field>
            <field name="model">res.partner</field>
            <field name="inherit_id" ref="account_followup.customer_statements_form_view"/>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='invoice_date']" position="replace">
                    <field name="new_date" string="Fecha" readonly="1"/>
                </xpath>
                <xpath expr="//field[@name='move_name']" position="replace">
                    <field name="new_move_name" string="Referencia" widget="open_move_widget" readonly="1"/>
                </xpath>
                <xpath expr="//field[@name='date_maturity']" position="attributes">
                    <attribute name="widget"></attribute>
                    <attribute name="readonly">1</attribute>
                </xpath>
                <xpath expr="//field[@name='invoice_origin']" position="attributes">
                    <attribute name="column_invisible">True</attribute>
                </xpath>
                <xpath expr="//field[@name='expected_pay_date']" position="attributes">
                    <attribute name="column_invisible">True</attribute>
                </xpath>
                <xpath expr="//field[@name='blocked']" position="attributes">
                    <attribute name="column_invisible">True</attribute>
                </xpath>
                <xpath expr="//field[@name='amount_residual_currency']" position="attributes">
                    <attribute name="column_invisible">True</attribute>
                </xpath>
                <xpath expr="//field[@name='unreconciled_aml_ids']//field[@name='currency_id']" position="replace">
                    <field name="currency_usd_id" column_invisible="True"/>
                    <field name="currency_pen_id" column_invisible="True"/>
                </xpath>
                <xpath expr="//field[@name='amount_currency']" position="replace">
                    <field name="amount_usd" string="Importe en $" widget="monetary" options="{'currency_field': 'currency_usd_id'}" optional="show" readonly="1"/>
                    <field name="amount_pen" string="Importe en S/" widget="monetary" options="{'currency_field': 'currency_pen_id'}" optional="show" readonly="1"/>
                </xpath>
                <xpath expr="//group[@class='oe_subtotal_footer']//field[@name='currency_id']" position="replace">
                    <field name="currency_usd_id" invisible="True"/>
                    <field name="currency_pen_id" invisible="True"/>
                </xpath>
                <xpath expr="//group[@class='oe_subtotal_footer']" position="inside">
                    <div style="display: flex; align-items: right;">
                        <div>
                            <label for="subtotal_usd" string="Subtotal en $"/>
                            <field name="subtotal_usd" style="font-weight: bold; font-size: 1.2em;" widget="monetary" options="{'currency_field': 'currency_usd_id'}"/>
                        </div>
                        <div>
                            <label for="subtotal_pen" string="Subtotal en S/"/>
                            <field name="subtotal_pen" style="font-weight: bold; font-size: 1.2em;" widget="monetary" options="{'currency_field': 'currency_pen_id'}"/>
                        </div>
                    </div>
                </xpath>
                <xpath expr="//group[@class='oe_subtotal_footer']//field[@name='total_due']" position="replace">
                    <field name="total_due" invisible="True"/>
                </xpath>
                <xpath expr="//group[@class='oe_subtotal_footer']//field[@name='total_overdue']" position="replace">
                    <field name="total_overdue" invisible="True"/>
                </xpath>
                <xpath expr="//group[@class='oe_subtotal_footer']" position="attributes">
                    <attribute name="style">display: flex; justify-content: space-evenly</attribute>
                </xpath>
                <xpath expr="//button[@name='action_open_unreconciled_partner']" position="after">
                    <button name="action_pdf" string="PDF" type="object" class="oe_highlight"/>
                    <button name="%(action_xlsx)d" string="XLSX" type="action" class="oe_highlight"/>
                </xpath>
                <xpath expr="//tree" position="attributes">
                    <attribute name="default_order">new_date desc</attribute>
                </xpath>
            </field>
        </record>

        <record id="customer_report_tree_view" model="ir.ui.view">
            <field name="name">customer.report.followup.tree</field>
            <field name="model">res.partner</field>
            <field name="inherit_id" ref="account_followup.customer_statements_tree_view"/>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='currency_id']" position="replace">
                    <field name="currency_usd_id" column_invisible="True"/>
                    <field name="currency_pen_id" column_invisible="True"/>
                </xpath>
                <xpath expr="//field[@name='total_due']" position="replace">
                    <field name="subtotal_usd" string="Total en $" widget="monetary" options="{'currency_field': 'currency_usd_id'}"/>
                </xpath>
                <xpath expr="//field[@name='total_overdue']" position="replace">
                    <field name="subtotal_pen" string="Total en S/" widget="monetary" options="{'currency_field': 'currency_pen_id'}"/>
                </xpath>
            </field>
        </record>

        <record id="customer_report_search_view" model="ir.ui.view">
            <field name="name">customer.report.followup.search</field>
            <field name="model">res.partner</field>
            <field name="inherit_id" ref="account_followup.customer_statements_search_view"/>
            <field name="priority">100</field>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='name']" position="attributes">
                    <attribute name="string">Cliente</attribute>
                </xpath>
                <xpath expr="//field[@name='followup_responsible_id']" position="attributes">
                    <attribute name="invisible">True</attribute>
                </xpath>
                <xpath expr="//field[@name='followup_line_id']" position="attributes">
                    <attribute name="invisible">True</attribute>
                </xpath>
                <xpath expr="//field[@name='followup_status']" position="attributes">
                    <attribute name="invisible">True</attribute>
                </xpath>
            </field>
        </record>
    </data>
</odoo>