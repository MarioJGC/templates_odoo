<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <!--        <template id="report_saleorder_document_custom" inherit_id="sale.report_saleorder_document">-->
    <template id="report_sale_order_document_custom">
        <t t-call="web.html_container">
            <t t-call="web.basic_layout">
                <t t-call="web.html_container">
                    <t t-set="doc" t-value="doc.with_context(lang=doc.partner_id.lang)"/>
                    <t t-set="forced_vat" t-value="doc.fiscal_position_id.foreign_vat"/>
                    <div class="header">
                        <t t-call="l10n_pe_lft_report.custom_head"/>
                    </div>
                    <div class="page">
                        <div class="oe_structure"/>
                        <t t-if="doc.company_id.company_head_type == 'lft'">
                            <hr style="border: none; border-bottom: 1px solid #a7a9ac; "/>
                        </t>
                        <div class="row mb-2" id="informations_4">
                            <t t-if="doc.company_id.company_head_type  == 'lft'">
                                <t t-call="l10n_pe_lft_report.report_after_header_quotation_lft"/>
                            </t>
                            <t t-if="doc.company_id.company_head_type  == 'wurfel'">
                                <t t-call="l10n_pe_lft_report.report_after_header_quotation_wurfel"/>
                            </t>
                        </div>
                        <t t-if="doc.company_id.company_head_type == 'lft'">
                            <hr style="border: none; border-bottom: 1px solid #a7a9ac;"/>
                        </t>
                        <!-- Is there a discount on at least one line? -->
                        <t t-set="lines_to_report" t-value="doc._get_order_lines_to_report()"/>
                        <t t-set="display_discount" t-value="any(l.discount for l in lines_to_report)"/>

                        <div class="oe_structure"></div>

                        <t t-if="doc.company_id.company_head_type  == 'lft'">
                            <t t-call="l10n_pe_lft_report.report_table_products_quotation_lft"/>
                        </t>
                        <t t-if="doc.company_id.company_head_type  == 'wurfel'">
                            <t t-call="l10n_pe_lft_report.report_table_products_quotation_wurfel"/>
                        </t>
                        <div style="page-break-inside: avoid;">
                            <t t-if="doc.company_id.company_head_type  == 'lft'">
                                <t t-call="l10n_pe_lft_report.report_table_observ_total_quotation_lft"/>
                            </t>
                            <t t-if="doc.company_id.company_head_type  == 'wurfel'">
                                <t t-call="l10n_pe_lft_report.report_table_observ_total_quotation_wurfel"/>
                            </t>
                            <div class="oe_structure"></div>
                            <div t-if="not doc.signature" class="oe_structure"></div>
                            <div t-else="" class="mt-4 ml64 mr4" name="signature">
                                <div class="offset-8">
                                    <strong>Signature</strong>
                                </div>
                                <div class="offset-8">
                                    <img t-att-src="image_data_uri(doc.signature)"
                                         style="max-height: 4cm; max-width: 8cm;"/>
                                </div>
                                <div class="offset-8 text-center">
                                    <span t-field="doc.signed_by">Oscar Morgan</span>
                                </div>
                            </div>
                            <!--                    <div>-->
                            <!--                        <span t-field="doc.note" name="order_note"/>-->
                            <!--                        <p t-if="not is_html_empty(doc.payment_term_id.note)">-->
                            <!--                            <span t-field="doc.payment_term_id.note">The payment should also be transmitted with-->
                            <!--                                love-->
                            <!--                            </span>-->
                            <!--                        </p>-->
                            <!--                        <p t-if="doc.fiscal_position_id and not is_html_empty(doc.fiscal_position_id.sudo().note)"-->
                            <!--                           id="fiscal_position_remark">-->
                            <!--                            <strong>Fiscal Position Remark:</strong>-->
                            <!--                            <span t-field="doc.fiscal_position_id.sudo().note">No further requirements for this-->
                            <!--                                payment-->
                            <!--                            </span>-->
                            <!--                        </p>-->
                            <!--                    </div>-->
                            <!--                        <div style="position: relative; top: 240px; clear: both;">-->
                            <div style="padding-top: 20px;">
                                <t t-if="doc.company_id.company_head_type  == 'lft'">
                                    <t t-call="l10n_pe_lft_report.report_term_condition_quotation_lft"/>
                                </t>
                                <t t-if="doc.company_id.company_head_type  == 'wurfel'">
                                    <t t-call="l10n_pe_lft_report.report_term_condition_quotation_wurfel"/>
                                </t>
                            </div>
                        </div>
                    </div>
                    <div class="footer" style="height: 20px !important;">
                        <div class="text-center">
                            <div t-if="report_type == 'pdf'">
                                PÃ¡gina:
                                <span class="page"/>
                                /
                                <span class="topage"/>
                            </div>
                            <div t-if="report_type == 'pdf' and display_name_in_footer" class="text-muted">
                                <span t-out="o.name">(document name)</span>
                            </div>
                        </div>
                    </div>
                </t>
            </t>
        </t>
    </template>

    <!--    <template id="report_saleorder_document_lft">-->
    <!--        <t t-call="web.html_container">-->
    <!--            <t t-foreach="docs" t-as="doc">-->
    <!--                <t t-call="l10n_pe_lft_report.report_sale_order_document_custom" t-lang="doc.partner_id.lang"/>-->
    <!--            </t>-->
    <!--        </t>-->
    <!--    </template>-->
    <template id="report_saleorder_document" inherit_id="sale.report_saleorder_raw">
        <xpath expr='//t[@t-call="sale.report_saleorder_document"]' position="replace">
            <t t-if="doc.company_id.country_code == 'PE'"
               t-call="l10n_pe_lft_report.report_sale_order_document_custom" t-lang="doc.partner_id.lang"/>
        </xpath>
    </template>

    <template id="custom_head">
        <div class="row">
            <t t-set="o" t-value="doc"/>
            <t t-if="doc.company_id.company_head_type  == 'lft'">
                <t t-call="l10n_pe_lft_report.report_general_left_header"/>
                <t t-call="l10n_pe_lft_report.report_right_header_quotation_lft"/>
            </t>
            <t t-if="doc.company_id.company_head_type  == 'wurfel'">
                <t t-call="l10n_pe_lft_report.report_general_left_header_wurfel"/>
                <t t-call="l10n_pe_lft_report.report_right_header_quotation_wurfel"/>
            </t>
        </div>
    </template>

    <!--    <template id="internal_layout_custom" inherit_id="web.internal_layout">-->
    <!--        <xpath expr="//div[@class='header']" position="replace">-->
    <!--        </xpath>-->
    <!--    </template>-->
</odoo>
